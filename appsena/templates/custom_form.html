{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Filtrar Reportes</title>
     <!-- Bootstrap CSS -->
      <link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet" />
      <!-- DataTables CSS -->
      <link href="https://cdn.datatables.net/1.10.25/css/jquery.dataTables.min.css" rel="stylesheet" />
      <link href="https://cdn.datatables.net/buttons/3.1.1/css/buttons.bootstrap4.min.css" rel="stylesheet" />
      {% comment %} <link rel="stylesheet" href="https://cdn.datatables.net/1.11.5/css/jquery.dataTables.min.css"> {% endcomment %}
      <!-- Buttons CSS -->
      <link rel="stylesheet" href="https://cdn.datatables.net/buttons/2.2.3/css/buttons.dataTables.min.css">
      
  
    <!-- Tu CSS personalizado -->
    <link href="{% static 'css/stylescustom_form.css' %}" rel="stylesheet" />  
    
</head>
<body>
    <div class="container">
        <h2>Filtrar Reportes</h2>
        <div class="row mb-3">
            <div class="col-md-4">
                <button type="button" class="btn btn-primary btn-block">Filtrar por fechas</button>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="fechaInicio">Fecha Inicio</label>
                    <input type="date" class="form-control" id="fechaInicio" />
                </div>
            </div>
            <div class="col-md-4">
                <div class="form-group">
                    <label for="fechaFinal">Fecha Final</label>
                    <input type="date" class="form-control" id="fechaFinal" />
                </div>
            </div>
            s
        </div>
       <h2>Generar reporte</h2>
        <br />
        <form method="post">
            <button type="submit" class="btn btn-primary">Generar reporte</button>
        </form>
        <table id="dataTableReport" class="display" >
            <div class="dataTableReport-responsive"/>
            <thead>
                <tr>
              <th>ID</th>
              <th>CÓDIGO REGIONAL</th>
              <th>NOMBRE REGIONAL</th>
              <th>CÓDIGO CENTRO</th>
              <th>NOMBRE CENTRO</th>
            </tr>
          </thead>
          <tbody>
            </tbody>
        </table>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <!-- DataTables JS -->
    <script src="https://cdn.datatables.net/1.11.5/js/jquery.dataTables.min.js"></script>
    <!-- Buttons JS -->
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/dataTables.buttons.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.html5.min.js"></script>
    <script src="https://cdn.datatables.net/buttons/2.2.3/js/buttons.print.min.js"></script>

    <!-- Inicialización de DataTables -->
    <script>
        fetch('http://127.0.0.1:8000/api/report/')
        .then(response => response.json())
        .then(data => {
            const dataTableReport = document.getElementById('dataTableReport').getElementsByTagName("tbody")[0];
            data.forEach(dataReport => {
                const fila = dataTableReport.insertRow();

                const celdaID = fila.insertCell(0);
                celdaID.textContent = dataReport.id;

                const codRegional = fila.insertCell(1);
                codRegional.textContent = dataReport.CODIGO_REGIONAL;
                
                const nombreRegional = fila.insertCell(2);
                nombreRegional.textContent = dataReport.NOMBRE_REGIONAL;

                const codCentro = fila.insertCell(3);
                codCentro.textContent = dataReport.CODIGO_CENTRO;
          
                const nomCentro = fila.insertCell(4);
                nomCentro.textContent = dataReport.NOMBRE_CENTRO;  

               
            


            });
            $(document).ready(function () {
                $('#dataTableReport').DataTable({
                    dom: 'Bfrtip',
                buttons: [
                    'excelHtml5',
                    'pdfHtml5'
                ]
                });
              });
          //  $('#dataTableReport').DataTable({});
        })
        .catch(error => console.error('Error al obtener Reportes:', error));
</script>
</body>
</html>
